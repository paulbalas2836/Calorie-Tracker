<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" href="/favicon.ico" />
      <script src="https://accounts.google.com/gsi/client" async defer></script>
      <meta name="google-signin-client_id" content="1078733011731-q159frn9qatl2h8iiqt11jkhh8o68nmq.apps.googleusercontent.com">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vite App</title>
      <script>

          if (localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
              document.documentElement.classList.add('dark')
          } else {
              document.documentElement.classList.remove('dark')
          }

          function connectWithGoogle(tokens){
              const URL = "http://localhost:8080/login/google"
              console.log(tokens)
              fetch(URL,{
                  method: 'POST',
                  mode: 'cors',
                  headers:{
                      'Content-Type': 'application/json',
                  },
                  body:  tokens.credential,
              }).then(response => response.json()).then(data => {
                  sessionStorage.setItem("user", data.appUserDto)
                  sessionStorage.setItem("token",data.jwt)
                  location.reload()
              }).catch(err => {console.log(err)})
          }
      </script>
  </head>
  <body class="dark:bg-gray-800 bg-white">
    <div id="app"></div>
    <script type="module" src="/src/main.js"></script>
  </body>
</html>
